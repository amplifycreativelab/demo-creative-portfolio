---
import styles from "./CaseStudyCardEnhanced.module.css";
import { Image } from "astro:assets";
import { withBase } from "../utils/paths";

const { entry, featured = false } = Astro.props;
const href = withBase(`work/${entry.slug}/`);
const cardClass = featured ? `${styles.card} ${styles.featured}` : styles.card;
---
<article class={cardClass} data-filter-item data-category={entry.data.category}>
  <a class={styles.media} href={href}>
    <div class={styles.imageWrapper}>
      <Image
        class={styles.image}
        src={entry.data.heroImage}
        alt={`${entry.data.client} project`}
        width={featured ? 900 : 720}
        height={featured ? 650 : 520}
        loading="lazy"
      />
      <div class={styles.imageOverlay}></div>
      <div class={styles.imageGlow}></div>
    </div>
    <div class={styles.number}>{String(entry.data.index || "01").padStart(2, "0")}</div>
  </a>
  <div class={styles.body}>
    <p class={styles.meta}>
      <span class={styles.pill}>{entry.data.category}</span>
      <span>{entry.data.client}</span>
      <span>{entry.data.location}</span>
    </p>
    <h3 class={styles.title}>
      <a href={href}>
        <span class={styles.titleText}>{entry.data.title}</span>
        <span class={styles.titleLine}></span>
      </a>
    </h3>
    <p class={styles.outcome}>{entry.data.outcome}</p>
    <a class={styles.readMore} href={href}>
      <span>View Case Study</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>
  </div>
</article>
